matrix:
  include:
  - language: python
    python: 3.5
    before_install: cd rekallpy
    install: pip3 install .
    script: python3 setup.py test
    deploy:
      skip_cleanup: true
      provider: pypi
      user: wcrichto
      password:
        secure: DNZXri2XPGDrP8Nw9ZXp8vevpTuB/JGqbFD6158xwIUARo2Pbkd12emYiTLRmw6bAK+EDg29dp1MFoTfS2QyRjQP63OrwniHBk8A/jmvoI91A5x8iO5xsmhcqapjq6QwGOH6+o8NelC0nfUhcQSILWj7u0sGr4jFXcAdzqT4M9gIVBWNMJFHDcUCHcDD3M44m6pI8FqoflMB9P8foxnAWWaRaHEBzNjQBv69FSLhN0tg+BXPOXd/YYCd2cL3aRTw9clH1hJLIhq4A8cEpJ4MHokeKfHIPLq+ExbcEpBhjhpQ/Fbm4eaJ9bToUJVrAv4FEhRUR5pxmx3h27vpSFsejRODJtEed9jvvR653gzGnrjkX7WOO54znakFJFIhqMl6mzIrazhM0qH5KhVPXyFJljrAi1Ikd8oq7G7CwTs6fEl+LuurMR7XNURk49C7T4VoLOSA57DuK+kIRjGzV+ECHUI/dUQdwy7CRjw/KnTNvgWtwttixNDkcgo1FH5weYKBmk3Uey9Y5woOpcnewdv0fp4bPp3cbRp7xNVc4Kxn66H/XDl+mYuU4PpdsjI7hMm6O51j9mSihvFIt5GiwSxvryMDOjKg2R1mTu8mhgPIrbLiEuQ/ZpeV6vIGGt8R/J+JkDmFmY/odagkeieS2Q75HgXOWqJb/Z0UVbKnxxO/IdU=
      on:
        tags: true
        distributions: sdist bdist_wheel
  - language: node_js
    node_js: 10
    before_install: cd rekalljs
    install: npm install && npm run prepublishOnly
    script: npm run test
    deploy:
      provider: npm
      email: wcrichto@cs.stanford.edu
      api_key:
        secure: QUs06lBFyNUVHh7+ph45dJDeo9drgCWng65UR5jMXcT8u6U1BPsQ1fy0+djAn2X9LL1ZWBJK+H+en17w70xInDUW0tRuI1XJ5SFGm+4J0+mPEisG4gygn7+E6bd1gIBqbxthQPJXIJQ1XZ4zRWZOuDliNVfMAn57SSJClP9kiTzV4U3wUG0uyPtlHNekAh5lw5Qj7SMRs0f9S2bnCIrbecKB7k/Cb/++sni8Umso/V0nOOKT+xZtCRRoQJkIUVtgycIhDrOunMDaPns0bqS0rIi6XiUS7CsFy8RSaOU5z2hDuZllMdFAwdiT6A5RcPRuJqVXf6+g7zmqNqRGmJlKupkCzLCgvV1SiSMKXcv88UmYBfUezhL17BZkMBjYatQL/fzNvrpz9iIlgYjoDBjNrK42rf1MCmu7tm1pUbWXCBu9tNDiWwER+qcHBUasugDQdfPrisDJQQiVpLdw1IXu7oXX+Lv5MRlXzgB0SnmjB5lDLs54BjbAmtsMy850V/APm0+KPkbtoV/1Zd0mEw67Wwq5s7O/BBokOf4wrBeUg6Ujh4/85T3UJ3hJ8bssWllV59MSWcfruGmxuUOF8iuTQDvGBNv9BFZOWvZcrLxqP9wLorEGJ1N/egS/3eFBSL4veWCv8iY4m3un+EI8kvGNSK3SFtMZFXVPPQMr9Fa4h1c=
      skip_cleanup: true
      on:
        tags: true
